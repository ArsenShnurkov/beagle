#!/bin/sh

MOZILLA_HOME=@mozillahome@
export MOZILLA_HOME
 
MOZILLA_FIVE_HOME=@mozillahome@
export MOZILLA_FIVE_HOME

LD_LIBRARY_PATH="@mozillahome@:$LD_LIBRARY_PATH"

if [ -e ./@target@ ] && [ -e ./Makefile.am ] ; then
    echo "Running uninstalled @target@ in the foreground."
    THIS_PATH="../Util:../BeagleClient:../Tiles:../images:../glue:."
    THIS_EXE="./@target@"
    EXTRA_ARGS=""
    FILTER_PATH="../Filters"
    export LD_LIBRARY_PATH="TrayIcon/libtrayicon/.libs:../glue/.libs:$LD_LIBRARY_PATH"
else
    THIS_PATH="@pkglibdir@"
    THIS_EXE="@pkglibdir@/@target@"
    EXTRA_ARGS=""
    FILTER_PATH=$BEAGLE_FILTER_PATH
    # FIXME: Set this correctly, since libtrayicon shouldn't be
    # installed into a system directory by default.
    export LD_LIBRARY_PATH="@pkglibdir@:$LD_LIBRARY_PATH"
fi

MONO_GAC_PREFIX="@gacprefix@:$MONO_GAC_PREFIX" MONO_PATH="$THIS_PATH:$MONO_PATH" BEAGLE_FILTER_PATH=$FILTER_PATH  exec -a mono-beagle-tray mono --debug $MONO_EXTRA_ARGS $THIS_EXE $EXTRA_ARGS "$@"

